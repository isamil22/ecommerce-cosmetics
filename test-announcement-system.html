<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Announcement System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; color: #0c5460; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .announcement-preview {
            background: linear-gradient(90deg, #ec4899, #8b5cf6, #3b82f6);
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .announcement-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: skewX(-12deg);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .online-counter {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 10px;
        }
        .green-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‰ Announcement System Test</h1>
        <p>This page tests the admin-controllable announcement system.</p>

        <div class="test-section info">
            <h3>ğŸ“‹ Test Instructions</h3>
            <ol>
                <li>Start your backend server (Spring Boot)</li>
                <li>Start your frontend server (React)</li>
                <li>Login as admin and go to <code>/admin/announcement</code></li>
                <li>Configure the announcement settings</li>
                <li>Check the announcement bar appears on the main site</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ API Endpoints Test</h3>
            <button onclick="testGetAnnouncement()">Test GET /api/announcement</button>
            <button onclick="testUpdateAnnouncement()">Test PUT /api/announcement</button>
            <div id="api-results"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ‘€ Announcement Preview</h3>
            <p>This is how your announcement bar will look:</p>
            <div class="announcement-preview">
                <span style="font-size: 18px; animation: bounce 1s infinite;">ğŸ‰</span>
                <span style="animation: pulse 2s infinite;">Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ $50 / Free Shipping on Orders Over $50!</span>
                <span style="font-size: 18px; animation: bounce 1s infinite;">âœ¨</span>
                <div class="online-counter">
                    <div class="green-dot"></div>
                    <span style="font-size: 12px;">52 Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù† / Online now</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>âœ… Features Implemented</h3>
            <ul>
                <li>âœ… Admin dashboard interface at <code>/admin/announcement</code></li>
                <li>âœ… Backend API endpoints (GET/PUT /api/announcement)</li>
                <li>âœ… Beautiful gradient background (pink to purple to blue)</li>
                <li>âœ… Bilingual text support (Arabic/English)</li>
                <li>âœ… Animated emojis (ğŸ‰ âœ¨)</li>
                <li>âœ… Live online counter with random numbers</li>
                <li>âœ… Customizable text, colors, and animations</li>
                <li>âœ… Enable/disable toggle</li>
                <li>âœ… Sticky positioning option</li>
                <li>âœ… Real-time preview in admin panel</li>
                <li>âœ… Permission-based access control</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>ğŸ¯ Admin Panel Features</h3>
            <ul>
                <li><strong>Text Editor:</strong> Change announcement message</li>
                <li><strong>Background Options:</strong> Gradient or solid colors</li>
                <li><strong>Text Color:</strong> Color picker for text</li>
                <li><strong>Animations:</strong> None, Pulse, or Bounce</li>
                <li><strong>Online Counter:</strong> Show/hide user count</li>
                <li><strong>Sticky Position:</strong> Keep at top when scrolling</li>
                <li><strong>Live Preview:</strong> See changes instantly</li>
                <li><strong>Save Changes:</strong> Persist settings to database</li>
            </ul>
        </div>

        <div class="test-section success">
            <h3>ğŸš€ Ready to Use!</h3>
            <p>The announcement system is now fully functional and admin-controllable. Admins can:</p>
            <ul>
                <li>Access the management panel at <code>/admin/announcement</code></li>
                <li>Customize all aspects of the announcement bar</li>
                <li>See live preview of changes</li>
                <li>Save settings that persist across sessions</li>
                <li>Enable/disable the announcement as needed</li>
            </ul>
        </div>
    </div>

    <script>
        async function testGetAnnouncement() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<p>Testing GET /api/announcement...</p>';
            
            try {
                const response = await fetch('/api/announcement');
                const data = await response.json();
                resultsDiv.innerHTML = `
                    <div class="success">
                        <h4>âœ… GET /api/announcement - Success!</h4>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error">
                        <h4>âŒ GET /api/announcement - Failed</h4>
                        <p>Error: ${error.message}</p>
                        <p>Make sure your backend server is running on port 8082</p>
                    </div>
                `;
            }
        }

        async function testUpdateAnnouncement() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<p>Testing PUT /api/announcement...</p>';
            
            const testData = {
                text: "Test announcement from admin panel! / Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©!",
                backgroundColor: "gradient",
                textColor: "#ffffff",
                enabled: true,
                animationType: "pulse",
                isSticky: false,
                fontWeight: "normal",
                showOnlineCounter: true
            };
            
            try {
                const response = await fetch('/api/announcement', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('token')
                    },
                    body: JSON.stringify(testData)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    resultsDiv.innerHTML = `
                        <div class="success">
                            <h4>âœ… PUT /api/announcement - Success!</h4>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </div>
                    `;
                } else {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            <h4>âŒ PUT /api/announcement - Failed</h4>
                            <p>Status: ${response.status}</p>
                            <p>You need to be logged in as admin to update announcements</p>
                        </div>
                    `;
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error">
                        <h4>âŒ PUT /api/announcement - Failed</h4>
                        <p>Error: ${error.message}</p>
                        <p>Make sure your backend server is running and you're logged in</p>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>
