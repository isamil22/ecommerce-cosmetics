<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment Visibility Control Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }
        .content {
            padding: 40px;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            background: #f8f9fa;
        }
        .test-section h2 {
            color: #2c3e50;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .test-section h2::before {
            content: "ğŸ§ª";
            font-size: 1.5rem;
        }
        .test-steps {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        .test-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .test-steps li {
            margin: 10px 0;
            line-height: 1.6;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            text-decoration: none;
            display: inline-block;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }
        .warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        .info-box {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .info-box h3 {
            color: #1976d2;
            margin-top: 0;
        }
        .feature-list {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .feature-list ul {
            margin: 0;
            padding-left: 20px;
        }
        .feature-list li {
            margin: 8px 0;
            line-height: 1.5;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 5px;
        }
        .status.pending {
            background: #fff3cd;
            color: #856404;
        }
        .status.completed {
            background: #d4edda;
            color: #155724;
        }
        .status.in-progress {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›ï¸ Comment Visibility Control Test</h1>
            <p>Test the new admin feature to control comment visibility on pack pages</p>
        </div>
        
        <div class="content">
            <!-- Feature Overview -->
            <div class="test-section">
                <h2>Feature Overview</h2>
                <div class="info-box">
                    <h3>âœ¨ New Admin Control: Comment Visibility</h3>
                    <p>Admins can now control whether the "Leave your Comment" section is displayed on pack pages. This provides better content management and allows admins to disable comments for specific packs when needed.</p>
                </div>
                
                <div class="feature-list">
                    <h3>ğŸ¯ What's New:</h3>
                    <ul>
                        <li><strong>Admin Pack Form:</strong> New radio button control to show/hide comments</li>
                        <li><strong>Pack Model:</strong> Added <code>commentsEnabled</code> field to database</li>
                        <li><strong>Pack Detail Page:</strong> Conditionally renders comment section based on setting</li>
                        <li><strong>Default Behavior:</strong> Comments are enabled by default (backward compatibility)</li>
                        <li><strong>Real-time Control:</strong> Changes take effect immediately after pack creation/update</li>
                    </ul>
                </div>
            </div>

            <!-- Test Steps -->
            <div class="test-section">
                <h2>Test Steps</h2>
                
                <div class="test-steps">
                    <h3>ğŸ“ Step 1: Test Admin Pack Form</h3>
                    <ol>
                        <li>Navigate to <code>http://localhost:8081/admin/packs/new</code></li>
                        <li>Fill in the basic pack information (name, price)</li>
                        <li>Look for the new "Comment Section" control in the Basic Information section</li>
                        <li>Verify you can toggle between "Show Comments" and "Hide Comments"</li>
                        <li>Test that the default selection is "Show Comments"</li>
                    </ol>
                </div>

                <div class="test-steps">
                    <h3>ğŸ“¦ Step 2: Create Pack with Comments Enabled</h3>
                    <ol>
                        <li>Select "Show Comments" option</li>
                        <li>Complete the pack creation form</li>
                        <li>Submit the form and verify success</li>
                        <li>Note the pack ID from the success message</li>
                    </ol>
                </div>

                <div class="test-steps">
                    <h3>ğŸ‘€ Step 3: Verify Comments Show on Pack Page</h3>
                    <ol>
                        <li>Navigate to the created pack page: <code>http://localhost:8081/packs/{packId}</code></li>
                        <li>Scroll down to look for the comments section</li>
                        <li>Verify you can see:
                            <ul>
                                <li>Comments header: "ğŸ’¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª / Comments"</li>
                                <li>Comment form: "âœï¸ Ø§ØªØ±Ùƒ ØªØ¹Ù„ÙŠÙ‚Ùƒ / Leave Your Comment"</li>
                                <li>Empty state message if no comments exist</li>
                            </ul>
                        </li>
                    </ol>
                </div>

                <div class="test-steps">
                    <h3>ğŸš« Step 4: Create Pack with Comments Disabled</h3>
                    <ol>
                        <li>Go back to <code>http://localhost:8081/admin/packs/new</code></li>
                        <li>Fill in pack information</li>
                        <li>Select "Hide Comments" option</li>
                        <li>Complete and submit the form</li>
                        <li>Note the new pack ID</li>
                    </ol>
                </div>

                <div class="test-steps">
                    <h3>ğŸ” Step 5: Verify Comments Hidden on Pack Page</h3>
                    <ol>
                        <li>Navigate to the second pack page: <code>http://localhost:8081/packs/{packId}</code></li>
                        <li>Scroll down through the entire page</li>
                        <li>Verify that NO comments section is visible</li>
                        <li>The page should end with the recommendations section</li>
                    </ol>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="test-section">
                <h2>Technical Implementation</h2>
                
                <h3>ğŸ”§ Backend Changes:</h3>
                <div class="code-block">
// Pack.java - Added new field
@Column(name = "comments_enabled")
private Boolean commentsEnabled = true;

// PackRequestDTO.java - Added new field
private Boolean commentsEnabled = true;

// PackResponseDTO.java - Added new field
private Boolean commentsEnabled;
                </div>

                <h3>ğŸ¨ Frontend Changes:</h3>
                <div class="code-block">
// AdminPackForm.jsx - Added radio button control
&lt;input type="radio" name="commentsEnabled" value="true" 
       checked={packData.commentsEnabled === true} /&gt;
&lt;input type="radio" name="commentsEnabled" value="false" 
       checked={packData.commentsEnabled === false} /&gt;

// PackDetailPage.jsx - Conditional rendering
{pack.commentsEnabled !== false && (
    &lt;div className="mt-12"&gt;
        {/* Comments section */}
    &lt;/div&gt;
)}
                </div>
            </div>

            <!-- Test Actions -->
            <div class="test-section">
                <h2>Quick Test Actions</h2>
                <div style="text-align: center; margin: 30px 0;">
                    <a href="http://localhost:8081/admin/packs/new" class="button" target="_blank">
                        ğŸ†• Create New Pack
                    </a>
                    <a href="http://localhost:8081/admin/packs" class="button success" target="_blank">
                        ğŸ“‹ View All Packs
                    </a>
                    <a href="http://localhost:8081/packs/1" class="button warning" target="_blank">
                        ğŸ‘€ Test Pack 1
                    </a>
                </div>
            </div>

            <!-- Expected Results -->
            <div class="test-section">
                <h2>Expected Results</h2>
                
                <div class="feature-list">
                    <h3>âœ… Comments Enabled Pack:</h3>
                    <ul>
                        <li>Admin form shows "Show Comments" selected by default</li>
                        <li>Pack page displays full comments section</li>
                        <li>Users can view existing comments</li>
                        <li>Users can submit new comments</li>
                        <li>Comment form is visible and functional</li>
                    </ul>
                </div>

                <div class="feature-list">
                    <h3>âŒ Comments Disabled Pack:</h3>
                    <ul>
                        <li>Admin form shows "Hide Comments" selected</li>
                        <li>Pack page has NO comments section</li>
                        <li>Page flows directly from pack details to recommendations</li>
                        <li>No comment form is visible</li>
                        <li>Existing comments (if any) are hidden</li>
                    </ul>
                </div>
            </div>

            <!-- Troubleshooting -->
            <div class="test-section">
                <h2>Troubleshooting</h2>
                
                <div class="info-box">
                    <h3>ğŸš¨ Common Issues:</h3>
                    <ul>
                        <li><strong>Comments still showing:</strong> Check if <code>commentsEnabled</code> is properly set in database</li>
                        <li><strong>Radio buttons not working:</strong> Verify JavaScript console for errors</li>
                        <li><strong>Form submission fails:</strong> Check if backend accepts the new field</li>
                        <li><strong>Database errors:</strong> May need to restart backend after model changes</li>
                    </ul>
                </div>

                <div class="code-block">
// Check browser console for errors
// Verify network requests include commentsEnabled field
// Test with browser developer tools
                </div>
            </div>

            <!-- Status Tracking -->
            <div class="test-section">
                <h2>Test Status</h2>
                <div style="text-align: center;">
                    <span class="status completed">âœ… Admin Form Updated</span>
                    <span class="status completed">âœ… Backend Model Updated</span>
                    <span class="status completed">âœ… Frontend Conditional Rendering</span>
                    <span class="status in-progress">ğŸ§ª Ready for Testing</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add some interactive functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers for buttons
            const buttons = document.querySelectorAll('.button');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    console.log('Opening:', this.href);
                });
            });

            // Add status update functionality
            const statusElements = document.querySelectorAll('.status');
            statusElements.forEach(status => {
                status.addEventListener('click', function() {
                    if (this.classList.contains('pending')) {
                        this.classList.remove('pending');
                        this.classList.add('in-progress');
                        this.textContent = 'ğŸ§ª In Progress';
                    } else if (this.classList.contains('in-progress')) {
                        this.classList.remove('in-progress');
                        this.classList.add('completed');
                        this.textContent = 'âœ… Completed';
                    }
                });
            });

            console.log('ğŸ›ï¸ Comment Visibility Control Test Page Loaded');
            console.log('ğŸ“‹ Ready to test the new admin comment control feature');
        });
    </script>
</body>
</html>
